
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Using Pip on Debian / Ubuntu &#8212; pydagogue 0.2 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/traditional.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Debian and Ubuntu Python package paths" href="debian_python_paths.html" />
    <link rel="prev" title="Using Microsoft Visual C with Python" href="python_msvc.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="debian_python_paths.html" title="Debian and Ubuntu Python package paths"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="python_msvc.html" title="Using Microsoft Visual C with Python"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pydagogue 0.2 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="python.html" accesskey="U">Notes and tutorials on Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Using Pip on Debian / Ubuntu</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="using-pip-on-debian-ubuntu">
<h1>Using Pip on Debian / Ubuntu<a class="headerlink" href="#using-pip-on-debian-ubuntu" title="Permalink to this headline">¶</a></h1>
<p>In the old days, it was hard and error-prone to use Python tools rather than
your Debian / Ubuntu package manager to install Python packages.</p>
<p>One of the big problems was the <a class="reference external" href="https://pythonhosted.org/setuptools/easy_install.html">easy_install</a> program, that installed
packages in a way that could make them particularly difficult to uninstall
(see <a class="reference internal" href="un_easy_install.html#un-easy-install"><span class="std std-ref">Clean out packages installed with easy_install</span></a>).</p>
<p>Things started to improve as <a class="reference external" href="http://pypi.python.org/pypi/pip">Pip</a> took over from <code class="docutils literal notranslate"><span class="pre">easy_install</span></code> as the
standard Python package installer.</p>
<p>They got better still when Pip got a binary installer format – <a class="reference external" href="https://pypi.python.org/pypi/wheel">wheels</a>.</p>
<p>The combination of <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a>, Pip and wheels makes it much easier to
maintain a set of Python environments to develop and test code.</p>
<p>This page is a recipe for setting up these environments on your Debian or
Ubuntu machine.</p>
<div class="section" id="do-you-really-want-to-do-this">
<h2>Do you really want to do this?<a class="headerlink" href="#do-you-really-want-to-do-this" title="Permalink to this headline">¶</a></h2>
<p>Debian and Ubuntu package maintainers put a lot of effort into maintaining
binary <code class="docutils literal notranslate"><span class="pre">.deb</span></code> installers for common Python packages like <a class="reference external" href="http://www.numpy.org">numpy</a>, <a class="reference external" href="http://www.scipy.org/scipylib/index.html">scipy</a> and
<a class="reference external" href="http://matplotlib.org">matplotlib</a>.  For example, to get the standard versions of these for your
Debian / Ubuntu distribution, you can do this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">numpy</span> <span class="n">python</span><span class="o">-</span><span class="n">scipy</span> <span class="n">python</span><span class="o">-</span><span class="n">matplotlib</span>
</pre></div>
</div>
<p>Standard <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> installation may well be all you need.  The versions of
numpy, scipy, matplotlib for your distribution can be a little behind the
latest version available from <a class="reference external" href="http://pypi.python.org">pypi</a> (the Python package index).  If you want a
more recent version of common Python packages, you might also consider
installing Debian / Ubuntu packages from <a class="reference external" href="http://neuro.debian.net/">NeuroDebian</a>.  Again, you can use the
standard Debian tools like <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> to do your installs.</p>
<p>The advantage of always using standard Debian / NeuroDebian packages, is that
the packages are carefully tested to be compatible with each other.
The Debian packages record dependencies with other libraries so you will
always get the libraries you need as part of the install.</p>
<p>If you use Pip to install packages, then you don’t get these guarantees.  If
you use Pip and run into problems with your Python installation, it will be
harder for you to get support from the Debian / Ubuntu community, because you
are using an installation method that they do not support, and that is more
fragile.</p>
<p>So, consider whether you can get away with the package versions in your
distribution, maybe by using the most recent packages from NeuroDebian. If
you can use these, then you probably should not use the Pip installs I’m
describing below.</p>
</div>
<div class="section" id="why-you-might-want-to-use-pip">
<h2>Why you might want to use Pip<a class="headerlink" href="#why-you-might-want-to-use-pip" title="Permalink to this headline">¶</a></h2>
<p>Although Pip installs are more fragile than Debian / Ubuntu package installs,
they do have several advantages.  With Pip you can:</p>
<ul class="simple">
<li><p>get the latest version of the package;</p></li>
<li><p>install specific packages into virtualenvs;</p></li>
<li><p>install packages that have not yet been built for your distribution.</p></li>
</ul>
</div>
<div class="section" id="if-you-do-want-pip-installs-on-your-debian-ubuntu-system">
<h2>If you do want Pip installs on your Debian / Ubuntu system<a class="headerlink" href="#if-you-do-want-pip-installs-on-your-debian-ubuntu-system" title="Permalink to this headline">¶</a></h2>
<p>The recipe I propose is this:</p>
<ul class="simple">
<li><p>if you have any <cite>easy_install</cite> installations, <a class="reference internal" href="un_easy_install.html"><span class="doc">remove them</span></a>;</p></li>
<li><p>install Pip and <a class="reference external" href="http://virtualenvwrapper.readthedocs.org/en/latest/">virtualenvwrapper</a> into your user directories (rather than
the system directories);</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span></code> to install packages into your day-to-day default
Python environment;</p></li>
<li><p>install Python packages via Pip, and let Pip wheel caching take care of
keeping a binary wheel ready for the next time you install this package;</p></li>
<li><p>have a very low threshold for using virtualenvs, via virtualenvwrapper.</p></li>
</ul>
<p>I suggest you never use Pip to change your system-wide packages – so you
never use Pip with <code class="docutils literal notranslate"><span class="pre">sudo</span></code>.  This makes sure your Pip-installed packages do
not break your system.  To avoid <code class="docutils literal notranslate"><span class="pre">sudo</span></code> you should always install into your
user directories (via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span></code>) or within virtualenvs (see
below).</p>
</div>
<div class="section" id="use-pip-user-installs-for-your-default-environment">
<h2>Use Pip <code class="docutils literal notranslate"><span class="pre">--user</span></code> installs for your default environment<a class="headerlink" href="#use-pip-user-installs-for-your-default-environment" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag to <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> tells Pip to install packages in some
specific directories within your home directory.  This is a good way to have
your own default Python environment that adds to the packages within your
system directories, and therefore, does not affect the system Python
installation.</p>
<p>So, if you install a package like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">mypackage</span>
</pre></div>
</div>
<p>then <code class="docutils literal notranslate"><span class="pre">mypackage</span></code> will be installed into a special user-specific directory,
that, by default, is on your Python module search path.  For example, outside
any virtualenv, here is what I get for the Python module search path
(<code class="docutils literal notranslate"><span class="pre">sys.path</span></code>) (after I have done a <code class="docutils literal notranslate"><span class="pre">--user</span></code> install as above):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python
Python 2.7.9 (default, Mar  1 2015, 12:57:24)
[GCC 4.9.2] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; print(&#39;\n&#39;.join(sys.path))

/usr/lib/python2.7
/usr/lib/python2.7/plat-x86_64-linux-gnu
/usr/lib/python2.7/lib-tk
/usr/lib/python2.7/lib-old
/usr/lib/python2.7/lib-dynload
/home/vagrant/.local/lib/python2.7/site-packages
/usr/local/lib/python2.7/dist-packages
/usr/lib/python2.7/dist-packages
/usr/lib/python2.7/dist-packages/PILcompat
/usr/lib/python2.7/dist-packages/gtk-2.0
/usr/lib/pymodules/python2.7
/usr/lib/python2.7/dist-packages/wx-3.0-gtk2
</pre></div>
</div>
<p>(For an explanation of the <code class="docutils literal notranslate"><span class="pre">dist-packages</span></code> entries, see
<a class="reference internal" href="debian_python_paths.html"><span class="doc">Debian and Ubuntu Python package paths</span></a>).</p>
<p>Notice the line <code class="docutils literal notranslate"><span class="pre">/home/vagrant/.local/lib/python2.7/site-packages</span></code>. This is
the path containing packages that have been installed with the Pip <code class="docutils literal notranslate"><span class="pre">--user</span></code>
option.</p>
<p>Python packages often install scripts (executables) as well as Python modules.
To get full use of <code class="docutils literal notranslate"><span class="pre">--user</span></code> installed packages, you may also want to put the
matching executable path onto your system.  I do this with the following lines
in my <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PY_USER_BIN=$(python -c &#39;import site; print(site.USER_BASE + &quot;/bin&quot;)&#39;)
export PATH=$PY_USER_BIN:$PATH
</pre></div>
</div>
<p>These lines work on Linux or OSX.</p>
<p>If you do this, then you can use the command line scripts installed by
packages like <a class="reference external" href="http://ipython.org">ipython</a>.  When using virtualenvs, you may want to make sure
you aren’t getting the <code class="docutils literal notranslate"><span class="pre">--user</span></code> installed scripts, by taking this directory
off the path.  If you are using <a class="reference internal" href="#install-virtualenvwrapper"><span class="std std-ref">virtualenvwrapper</span></a> (see below) you can do this automatically, with
something like this in a <code class="docutils literal notranslate"><span class="pre">~/.virtualenvs/postactivate</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Clear user Python binary path when using virtualenvs
export PATH=$(echo $PATH | sed &quot;s|${PY_USER_BIN}:\{0,1\}||&quot;)
</pre></div>
</div>
</div>
<div class="section" id="install-update-pip-using-pip-install-user">
<h2>Install, update Pip using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span></code><a class="headerlink" href="#install-update-pip-using-pip-install-user" title="Permalink to this headline">¶</a></h2>
<p>For these steps to work, you will need the Pip <code class="docutils literal notranslate"><span class="pre">--user</span></code> install binary
directory on your path.  See above for how to do this. Check that your
<code class="docutils literal notranslate"><span class="pre">--user</span></code> binary directory is on the path with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo $PATH
</pre></div>
</div>
<p>The output should contain something like <code class="docutils literal notranslate"><span class="pre">/home/your-user/.local/bin</span></code>.</p>
<p>You will need Pip version &gt;= 6.0 in order to get <a class="reference external" href="https://pip.pypa.io/en/latest/reference/pip_install/#caching">Pip wheel caching</a>. This is a
killer Pip feature, that means that you only build wheels from source once,
the first time you install a package.  Pip then caches the wheel so you use
the cached version next time you do an install.</p>
<p>First install the latest version of Pip into your user account by following
the instructions at <a class="reference external" href="https://pip.pypa.io/en/stable/installing/#installing-with-get-pip-py">install Pip with get-pip.py</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">LO</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">pypa</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">pip</span><span class="o">.</span><span class="n">py</span>
<span class="n">python</span> <span class="n">get</span><span class="o">-</span><span class="n">pip</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
<p>If you are using both python 2 and python 3 versions, do the installation for
both versions, installing last for the Python version that you want to own the
<code class="docutils literal notranslate"><span class="pre">Pip</span></code> command, e.g:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Intall pip for Python 2 installs</span>
<span class="n">python</span> <span class="n">get</span><span class="o">-</span><span class="n">pip</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">user</span>
<span class="c1"># Upgrade Pip for Python 3 installs (this one owns &quot;pip&quot; now)</span>
<span class="n">python3</span> <span class="n">get</span><span class="o">-</span><span class="n">pip</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
<p>Now check the Pip version is &gt;= 6.0:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>If you installed for both Python 2 and Python 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip2</span> <span class="o">--</span><span class="n">version</span>
<span class="n">pip3</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>Check you are picking up the <code class="docutils literal notranslate"><span class="pre">--user</span></code> Pip by looking at the output of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">which</span> <span class="n">pip</span>
<span class="n">which</span> <span class="n">pip2</span>
<span class="n">which</span> <span class="n">pip3</span>
</pre></div>
</div>
<p>This should give you outputs like <code class="docutils literal notranslate"><span class="pre">/home/your-user/.local/bin/pip</span></code>.</p>
</div>
<div class="section" id="install-update-virtualenvwrapper">
<span id="install-virtualenvwrapper"></span><h2>Install, update virtualenvwrapper<a class="headerlink" href="#install-update-virtualenvwrapper" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://virtualenvwrapper.readthedocs.org/en/latest/">virtualenvwrapper</a> is a very useful – er – wrapper around – er –
<code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>, that makes it easier and neater to have a library of virtual
Python environments.  First install the Debian packaged version to your system
directories.  This sets up bash shell integration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">virtualenvwrapper</span>
</pre></div>
</div>
<p>Now upgrade your user installation to the latest virtualenvwrapper:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">virtualenvwrapper</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--upgrade</span></code> in the installation is important because virtualenv
(installed by virtualenvwrapper) contains its own copy of Pip.  We need the
latest version of virtualenv to make sure we will get a recent version of Pip
in our virtualenvs.</p>
<p>Check you are getting your new <code class="docutils literal notranslate"><span class="pre">--user</span></code> installed version, with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">which</span> <span class="n">virtualenv</span>
</pre></div>
</div>
<p>This should you something like <code class="docutils literal notranslate"><span class="pre">/home/your-user/.local/bin/virtualenv</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">virtualenvwrapper</span></code> apt package puts useful aliases into the default
bash shell environment.  To get these aliases loaded up in your current shell,
this one time you should do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/.</span><span class="n">bashrc</span>
</pre></div>
</div>
<p>Check you have the virtualenvwrapper aliases loaded with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkvirtualenv</span>
</pre></div>
</div>
<p>This should give you the help for the <code class="docutils literal notranslate"><span class="pre">mkvirtualenv</span></code> virtualenvwrapper
command.</p>
</div>
<div class="section" id="set-up-your-system-to-build-binary-python-packages">
<h2>Set up your system to build binary Python packages<a class="headerlink" href="#set-up-your-system-to-build-binary-python-packages" title="Permalink to this headline">¶</a></h2>
<p>This will install the tools that Python needs to build any binary package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># For Python 2</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">python</span><span class="o">-</span><span class="n">dev</span>

<span class="c1"># For Python 3</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">python3</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>Pip will need these tools when installing Python packages that do not already
have binary packages for your platform (see below).</p>
</div>
<div class="section" id="build-or-install-wheels-by-installing-with-pip">
<h2>Build or install wheels by installing with Pip<a class="headerlink" href="#build-or-install-wheels-by-installing-with-pip" title="Permalink to this headline">¶</a></h2>
<p>Many standard Python packages have binary <a class="reference external" href="https://github.com/pypa/manylinux">manylinux</a> <a class="reference external" href="https://pypi.python.org/pypi/wheel">wheels</a>. These binary
installers will work for almost any Intel-based Linux, including Debian /
Ubuntu.  If your platform is compatible, Pip will download and install the
binary package when you do a simple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">numpy</span>
</pre></div>
</div>
<p>where <cite>numpy</cite> is the package to install.</p>
<p>Start up a new virtualenv for Python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkvirtualenv</span> <span class="n">venv</span>
</pre></div>
</div>
<p>Install numpy and cython.  If you are on an Intel platform, this will download
binary wheels for the latest numpy and cython.  If you are not on Intel, Pip
will download the source packages, then build and cache the wheels
<a class="footnote-reference brackets" href="#building-wheels" id="id1">1</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span> <span class="n">cython</span>
</pre></div>
</div>
<p>Now you can install (and, if not on Intel, build and cache) other wheels you
might need:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">scipy</span> <span class="n">matplotlib</span> <span class="n">h5py</span>
</pre></div>
</div>
<p>Finish up by deactivating the virtualenv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deactivate</span>
</pre></div>
</div>
<p>This is the same sequence using Python 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkvirtualenv</span> <span class="o">--</span><span class="n">python</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span> <span class="n">venv</span><span class="o">-</span><span class="n">py3</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span> <span class="n">cython</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">scipy</span> <span class="n">matplotlib</span> <span class="n">h5py</span>
<span class="n">deactivate</span>
</pre></div>
</div>
</div>
<div class="section" id="now-you-are-in-virtualenv-nirvana">
<h2>Now you are in virtualenv nirvana<a class="headerlink" href="#now-you-are-in-virtualenv-nirvana" title="Permalink to this headline">¶</a></h2>
<p>It’s often good to use virtualenvs to start a development session.  Doing so
means that you can install exactly the requirements that you need, without
causing changes to your other virtualenvs.</p>
<p>You can now make virtualenvs for your testing development quickly.  Say you
want to test something out for Python 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make clean virtual environment</span>
<span class="n">mkvirtualenv</span> <span class="o">--</span><span class="n">python</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span> <span class="n">testing</span><span class="o">-</span><span class="n">something</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span> <span class="n">scipy</span> <span class="n">matplotlib</span> <span class="n">h5py</span>
<span class="c1"># install anything else you want</span>
<span class="c1"># run your tests</span>
<span class="n">deactivate</span>
</pre></div>
</div>
<p>Nice.</p>
<p>Even if you are offline, you can always install things you have already built
and cached, by adding the <code class="docutils literal notranslate"><span class="pre">--no-index</span></code> flag to Pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make another clean virtual environment</span>
<span class="n">mkvirtualenv</span> <span class="o">--</span><span class="n">python</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span> <span class="n">testing</span><span class="o">-</span><span class="n">offline</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span> <span class="n">scipy</span> <span class="n">matplotlib</span> <span class="n">h5py</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">index</span>
<span class="c1"># install anything else you want</span>
<span class="c1"># run your tests</span>
<span class="n">deactivate</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-new-packages-and-wheels">
<span id="new-wheels"></span><h2>Adding new packages and wheels<a class="headerlink" href="#adding-new-packages-and-wheels" title="Permalink to this headline">¶</a></h2>
<p>Adding new wheels is usually as simple as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Switch to relevant virtualenv to build, cache, install wheel</span>
<span class="n">workon</span> <span class="n">venv</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">my</span><span class="o">-</span><span class="n">package</span>
</pre></div>
</div>
<p>Sometimes the Python package you are installing has nasty binary dependencies.
In this case, usually your easiest path is to install the build dependencies
for the corresponding Debian / Ubuntu package, and then continue as before:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">build</span><span class="o">-</span><span class="n">dep</span> <span class="n">pillow</span>
<span class="n">workon</span> <span class="n">venv</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pillow</span>
</pre></div>
</div>
</div>
<div class="section" id="sometimes-it-s-a-package-too-far">
<h2>Sometimes, it’s a package too far<a class="headerlink" href="#sometimes-it-s-a-package-too-far" title="Permalink to this headline">¶</a></h2>
<p>There are some Python packages that have heavy binary dependencies, or use
complicated build systems, so that it is not practical to build a wheel with
Pip.  Examples I know of are VTK and ITK.  For those cases, your best option
is to install the Python package using <code class="docutils literal notranslate"><span class="pre">apt-get</span></code>, and then make your
virtualenv with the <code class="docutils literal notranslate"><span class="pre">--system-site-packages</span></code> flag, so that it will pick up
the installed packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">vtk</span>
<span class="n">mkvirtualenv</span> <span class="o">--</span><span class="n">system</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span> <span class="n">an</span><span class="o">-</span><span class="n">env</span><span class="o">-</span><span class="n">including</span><span class="o">-</span><span class="n">vtk</span>
</pre></div>
</div>
</div>
<div class="section" id="doesn-t-work-for-you-help-improve-this-page">
<h2>Doesn’t work for you?  Help improve this page<a class="headerlink" href="#doesn-t-work-for-you-help-improve-this-page" title="Permalink to this headline">¶</a></h2>
<p>If you try the instructions here, and you can’t get a particular package or
set-up to work, then why not make an <a class="reference external" href="pydagogueissues">issue</a> for the
repository hosting these pages, and I’ll see if I can work the fix into this
page somewhere.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="building-wheels"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>If you need to build common packages such as Numpy (for
example, on platforms like ARM), you should first install the Debian /
Ubuntu packages with the build dependencies for these packages. For example
you might want to run something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">build</span><span class="o">-</span><span class="n">dep</span> <span class="n">python</span><span class="o">-</span><span class="n">numpy</span> <span class="n">python</span><span class="o">-</span><span class="n">scipy</span> <span class="n">matplotlib</span> <span class="n">h5py</span>
</pre></div>
</div>
<p>This will take a fairly long time.  See <a class="reference internal" href="#new-wheels"><span class="std std-ref">Adding new packages and wheels</span></a>.</p>
</dd>
</dl>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using Pip on Debian / Ubuntu</a><ul>
<li><a class="reference internal" href="#do-you-really-want-to-do-this">Do you really want to do this?</a></li>
<li><a class="reference internal" href="#why-you-might-want-to-use-pip">Why you might want to use Pip</a></li>
<li><a class="reference internal" href="#if-you-do-want-pip-installs-on-your-debian-ubuntu-system">If you do want Pip installs on your Debian / Ubuntu system</a></li>
<li><a class="reference internal" href="#use-pip-user-installs-for-your-default-environment">Use Pip <code class="docutils literal notranslate"><span class="pre">--user</span></code> installs for your default environment</a></li>
<li><a class="reference internal" href="#install-update-pip-using-pip-install-user">Install, update Pip using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span></code></a></li>
<li><a class="reference internal" href="#install-update-virtualenvwrapper">Install, update virtualenvwrapper</a></li>
<li><a class="reference internal" href="#set-up-your-system-to-build-binary-python-packages">Set up your system to build binary Python packages</a></li>
<li><a class="reference internal" href="#build-or-install-wheels-by-installing-with-pip">Build or install wheels by installing with Pip</a></li>
<li><a class="reference internal" href="#now-you-are-in-virtualenv-nirvana">Now you are in virtualenv nirvana</a></li>
<li><a class="reference internal" href="#adding-new-packages-and-wheels">Adding new packages and wheels</a></li>
<li><a class="reference internal" href="#sometimes-it-s-a-package-too-far">Sometimes, it’s a package too far</a></li>
<li><a class="reference internal" href="#doesn-t-work-for-you-help-improve-this-page">Doesn’t work for you?  Help improve this page</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="python_msvc.html"
                        title="previous chapter">Using Microsoft Visual C with Python</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="debian_python_paths.html"
                        title="next chapter">Debian and Ubuntu Python package paths</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installing_on_debian.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="debian_python_paths.html" title="Debian and Ubuntu Python package paths"
             >next</a> |</li>
        <li class="right" >
          <a href="python_msvc.html" title="Using Microsoft Visual C with Python"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pydagogue 0.2 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="python.html" >Notes and tutorials on Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Using Pip on Debian / Ubuntu</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2016 - Matthew Brett.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.3.
    </div>
  </body>
</html>